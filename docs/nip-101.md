# NIP-101 - Forms On Nostr

`draft` `optional` `author:abhay-raizada` `author:rramaa`

## Form Template

Form template is stored in a parameterized replaceable event of `kind: 30168`.
The event structure is:

```
{
    "kind": 30168,
    "content" : "<Form Template as JSON>"
    "tags": [["d", "<form identifier>"]],
    "pubkey": "Author of the form"
}
```

Content is a stringified JSON object with attributes: name, description, schema, client_url, fields and settings.

Clients may wish to add additional keys depending on the use-case.

Fields and settings maybe client specific, but a form is expected to have name, description and schema as part of the content JSON for interoperability.

### Form Fields

Fields schema is client specific, formstr schema is present here:
https://github.com/abhay-raizada/nostr-forms/blob/master/packages/formstr-sdk/src/form-schemas/v1/form-spec.json feel free to add other schema's as needed.

### Sharing Links

Links would need to parameters from the users: the npub of the author and form identifier.

For example: `https://formstr.app/#f/<npub of author>/<form identifier>`
The form identifier is the d tag of the form template event.

### Groups

If a user wants to share a form with a group, they would need to create a shared user and share the private key of this user with their group.

### Private Forms

The fields key in the form template maybe plain-text or encrypted using a symmetric key that is attached to the form url while sharing. This would protect the form from being viewed by public querying of the relays.

Example `https://formstr.app/#f/<npub of author>/<form identifier>?key=<symmetric key>`

## Responses

Response events are attached to a form(3068 kind event), and the event data is stored in a `kind: 30169` event

Response structure:

```
{
    "kind": 30169,
    "content" : "<Encrypted Response as JSON>",
    "tags": [["a", "30168:<pubkey of the author>:<form identifier>"]],
    "pubkey": "Author of Response"
}
```

Content is a stringified JSON object with attributes: schema, isPublic and response.

while response can be client specific, schema and isPublic are expected to be present for interoperability.

schema: Holds the structure of the response object for example the formstr schema is present [here](https://github.com/abhay-raizada/nostr-forms/blob/master/packages/formstr-sdk/src/form-schemas/v1/response-spec.json)

isPublic: A boolean flag to indicate if the response data is encrypted or unencrypted.

### Polls

Polls maybe the use-case for forms where public responses are expected. Though private polls can still exist.
